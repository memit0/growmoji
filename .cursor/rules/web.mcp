# Habit Tracker Web Version - Cursor Rules

## Project Overview
This is the **WEB VERSION** of the Habit Tracker productivity app. The web version serves as both a landing page and a web application for premium users.

## Architecture Requirements

### Landing Page (Public)
- **MUST look exactly like https://www.habitkit.app**
- Clean, minimalistic design following v0/shadcn aesthetic
- Modern gradient backgrounds and glass morphism effects
- Responsive design for all screen sizes
- App store badges linking to mobile app downloads
- Hero section with app screenshots
- Feature highlights with icons and descriptions
- Customer testimonials section
- Pricing section (redirects to mobile app)

### Web App (Authenticated Users)
- **Premium members only** - data syncing enabled
- Clean dashboard matching mobile app design patterns
- Habit tracking interface optimized for desktop/tablet
- Calendar view for habit completion history
- Statistics and progress visualizations
- **NO RevenueCat integration** - billing handled on mobile
- **NO widget functionality** - mobile-only feature

## Technology Stack

### Frontend Framework
- **Next.js 14+** with App Router
- **TypeScript** for type safety
- **Tailwind CSS** for styling
- **shadcn/ui** components
- **Framer Motion** for animations
- **React Hook Form** for form handling

### Backend Integration
- **Supabase** for database (sync with mobile app)
- **Clerk** for authentication (sync with mobile app)
- Shared database schema with mobile app
- **NO RevenueCat** - subscription status from mobile app only

### State Management
- **Zustand** or **React Query/TanStack Query**
- Local state for UI interactions
- Server state for data fetching/caching

## File Structure

```
web/
├── app/                          # Next.js App Router
│   ├── (landing)/               # Public landing page routes
│   │   ├── page.tsx            # Home page (HabitKit clone)
│   │   ├── features/           # Feature pages
│   │   ├── pricing/            # Pricing page
│   │   └── layout.tsx          # Landing layout
│   ├── (app)/                  # Protected app routes
│   │   ├── dashboard/          # Main habit tracking dashboard
│   │   ├── habits/             # Habit management
│   │   ├── calendar/           # Calendar view
│   │   ├── stats/              # Statistics and analytics
│   │   └── layout.tsx          # App layout
│   ├── auth/                   # Authentication pages
│   │   ├── sign-in/
│   │   ├── sign-up/
│   │   └── callback/
│   ├── api/                    # API routes
│   ├── globals.css             # Global styles
│   └── layout.tsx              # Root layout
├── components/
│   ├── landing/                # Landing page components
│   │   ├── hero-section.tsx
│   │   ├── features-grid.tsx
│   │   ├── testimonials.tsx
│   │   ├── app-screenshots.tsx
│   │   └── download-buttons.tsx
│   ├── app/                    # Web app components
│   │   ├── habit-card.tsx
│   │   ├── habit-calendar.tsx
│   │   ├── progress-charts.tsx
│   │   └── dashboard-layout.tsx
│   ├── ui/                     # shadcn/ui components
│   └── shared/                 # Shared components
├── lib/
│   ├── supabase.ts            # Supabase client
│   ├── auth.ts                # Auth utilities
│   ├── types.ts               # Shared types
│   └── utils.ts               # Utility functions
├── hooks/                     # Custom React hooks
├── styles/                    # Additional styles
└── public/                    # Static assets
    ├── screenshots/           # App screenshots for landing
    ├── icons/                 # Feature icons
    └── app-store-badges/      # Download badges
```

## Development Guidelines

### Landing Page Development
1. **Exact Visual Match**: Landing page MUST replicate https://www.habitkit.app exactly
2. **Modern Design System**: Use shadcn/ui components with custom styling
3. **Performance**: Optimize images, use Next.js Image component
4. **SEO**: Proper meta tags, structured data, Open Graph tags
5. **Analytics**: Google Analytics integration for conversion tracking

### Web App Development
1. **Premium Gate**: Check user subscription status before allowing access
2. **Data Sync**: Real-time sync with mobile app data via Supabase
3. **Responsive Design**: Optimize for desktop, tablet, and mobile web
4. **Progressive Enhancement**: Core functionality works without JavaScript
5. **Accessibility**: WCAG 2.1 AA compliance

### Authentication Flow
1. **Unified Auth**: Use Clerk for consistent auth across mobile/web
2. **Subscription Check**: Verify premium status from mobile app
3. **Graceful Fallback**: Non-premium users see upgrade prompt
4. **Session Sync**: Maintain auth state across tabs/windows

### Restrictions for Web Version
- **NO RevenueCat**: All billing handled through mobile app
- **NO Widgets**: Home screen widgets are mobile-only
- **NO Push Notifications**: Use browser notifications sparingly
- **NO App Store Features**: No in-app purchases, no store reviews
- **Upgrade Flow**: Direct users to mobile app for subscription

## Styling Guidelines

### Design System
- **Primary Colors**: Follow HabitKit's color scheme
- **Typography**: Clean, readable fonts (Inter, SF Pro)
- **Spacing**: Consistent 8px grid system
- **Shadows**: Subtle shadows for depth
- **Animations**: Smooth micro-interactions

### Component Patterns
```tsx
// Example habit card component
interface HabitCardProps {
  habit: Habit;
  onToggle: (id: string) => void;
  isCompleted: boolean;
}

export function HabitCard({ habit, onToggle, isCompleted }: HabitCardProps) {
  return (
    <Card className="group hover:shadow-lg transition-all duration-200">
      <CardContent className="p-4">
        <div className="flex items-center gap-3">
          <Button
            variant={isCompleted ? "default" : "outline"}
            size="icon"
            onClick={() => onToggle(habit.id)}
            className="shrink-0"
          >
            {habit.emoji}
          </Button>
          <div className="flex-1">
            <h3 className="font-semibold">{habit.name}</h3>
            <p className="text-sm text-muted-foreground">
              Streak: {habit.currentStreak} days
            </p>
          </div>
        </div>
      </CardContent>
    </Card>
  );
}
```

### Performance Optimizations
- **Code Splitting**: Route-based code splitting
- **Image Optimization**: Next.js Image with proper sizing
- **Bundle Analysis**: Regular bundle size monitoring
- **Caching**: Aggressive caching for static assets
- **Lazy Loading**: Components and images below the fold

## Database Integration

### Shared Schema
Use existing mobile app database schema:
- `habits` table for habit tracking
- `habit_logs` table for completion tracking
- `todos` table for task management
- `timer_settings` table for pomodoro settings

### Data Sync Strategy
1. **Real-time Updates**: Supabase real-time subscriptions
2. **Optimistic Updates**: Update UI immediately, sync to server
3. **Conflict Resolution**: Last-write-wins for simplicity
4. **Offline Support**: Cache critical data locally

## Security Considerations

### Authentication Security
- **JWT Validation**: Verify tokens on every request
- **CSRF Protection**: Built-in Next.js CSRF protection
- **Rate Limiting**: API route rate limiting
- **Input Sanitization**: Validate all user inputs

### Data Protection
- **RLS Policies**: Use Supabase Row Level Security
- **API Keys**: Secure environment variable management
- **HTTPS Only**: Force HTTPS in production
- **Content Security Policy**: Strict CSP headers

## Performance Targets

### Core Web Vitals
- **LCP**: < 2.5 seconds
- **FID**: < 100 milliseconds  
- **CLS**: < 0.1

### Bundle Size
- **Initial Bundle**: < 250KB gzipped
- **Route Chunks**: < 50KB per route
- **Third-party Scripts**: Minimize external dependencies

## Testing Strategy

### Testing Framework
- **Jest** for unit tests
- **React Testing Library** for component tests
- **Playwright** for E2E tests
- **Lighthouse CI** for performance testing

### Test Coverage
- 80%+ code coverage for critical paths
- Component interaction testing
- Authentication flow testing
- Data sync testing

## Deployment Configuration

### Environment Setup
```env
# Required Environment Variables
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key

# Optional
NEXT_PUBLIC_GA_ID=your_google_analytics_id
NEXT_PUBLIC_APP_STORE_URL=your_app_store_url
NEXT_PUBLIC_GOOGLE_PLAY_URL=your_google_play_url
```

### Build Optimization
- **Static Generation**: Pre-render landing pages
- **Dynamic Rendering**: Server-side render app pages
- **Edge Functions**: Use Vercel Edge for global performance
- **CDN**: Serve static assets from CDN

## Content Guidelines

### Landing Page Content
- **Hero Message**: Clear value proposition matching HabitKit
- **Feature Benefits**: Focus on habit tracking, streaks, progress
- **Social Proof**: Testimonials and app store ratings
- **Call-to-Action**: Prominent download buttons

### App Content
- **Empty States**: Helpful guidance for new users
- **Loading States**: Skeleton loaders for better UX
- **Error Messages**: Clear, actionable error messaging
- **Success Feedback**: Confirmations for user actions

## Monitoring and Analytics

### Performance Monitoring
- **Web Vitals**: Track Core Web Vitals
- **Error Tracking**: Sentry for error monitoring
- **User Analytics**: Google Analytics 4
- **A/B Testing**: Feature flag system for testing

### Business Metrics
- **Conversion Rate**: Landing page to app download
- **User Engagement**: Time spent in web app
- **Feature Usage**: Track most/least used features
- **Subscription Impact**: Premium user behavior analysis

---

## Quick Start Commands

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Build for production
npm run build

# Run tests
npm test

# Type checking
npm run type-check

# Lint code
npm run lint
```

Remember: This is the **WEB VERSION** - focus on landing page conversion and premium user experience. Keep mobile-first features on mobile! 